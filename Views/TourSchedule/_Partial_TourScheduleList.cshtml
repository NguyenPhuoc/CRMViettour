@using CRM.Core
@using CRMViettour.Models
@using CRMViettour.Utilities
@model IEnumerable<tbl_TourSchedule>
    @{
        int i = 1;
    }

    <div class="table-scrollable table-custom-format">
        <table class="table  table-bordered table-hover dataTable" id="table-booking">
            <thead>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th>STT</th>
                    <th>Tour</th>
                    <th>Loại dịch vụ</th>
                    <th>Tên đối tác</th>
                    <th>Nội dung</th>
                    <th>Thời gian</th>
                    <th>Ngày nhập</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null)
                {
                    foreach (var item in Model)
                    {
                        <tr class="odd gradeX">
                            <input type="hidden" name="ID" value="@item.Id" />
                            <td>@i</td>
                            <td>@item.tbl_Tour.Name</td>
                            <td>@(item.tbl_Dictionary != null ? item.tbl_Dictionary.Name : "")</td>
                            <td>@(item.tbl_Partner != null ? item.tbl_Partner.Name : "")</td>
                            <td>@Html.Raw(item.Note)</td>
                            <td>@string.Format("{0} {1:dd-MM-yyyy}", item.StartTime, item.Date)</td>
                            <td>@string.Format("{0:dd-MM-yyyy}", item.CreatedDate)</td>
                        </tr>
                        i++;
                    }
                }
            </tbody>
        </table>

    </div>
<script>
    $("table#table-booking").delegate("tr", "click", function () {
        $('tr').not(this).removeClass('oneselected');
        $(this).toggleClass('oneselected');

        var dataPost = { id: $(this).find("input[type='hidden']").val() };
        $.ajax({
            type: "POST",
            url: '/TourSchedule/InfoLichDiTour',
            data: JSON.stringify(dataPost),
            contentType: "application/json; charset=utf-8",
            dataType: "html",
            success: function (data) {
                $("#table-document").html(data);
            }
        });
    });
</script>